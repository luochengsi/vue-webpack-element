webpackJsonp([18],{121:function(t,e,a){"use strict";var i=a(22),o=a.n(i);e["default"]={data:function(){return{tableAPIList:[],currentPage:1,totle:0,sRow:0,rowSize:10,visible:!1,form:{apiName:"",sql:"",desc:"",id:0,chk:""},formLabelWidth:"120px",dialogTitle:"",formInline:{apiName:""}}},mounted:function(){this.init()},methods:{init:function(){var t=this;return new Promise(function(e,a){t.countAPIList(),t.getAPIList(),e()})},countAPIList:function(){var t=this;o.a.getDataList.call(t,COUNT_API_LIST,{})["catch"](function(t){console.log("oh no",t)}).then(function(e){t.totle=e.aaData[0].total})},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",key:Date.now()})},getAPIList:function(){var t=this;o.a.getDataList.call(t,GET_API_LIST,{sRow:t.sRow*t.rowSize,eRow:t.rowSize})["catch"](function(t){console.log("oh no",t)}).then(function(e){t.tableAPIList=e.aaData})},handleSizeChange:function(t){var e=this;e.rowSize=t,e.init()},handleCurrentChange:function(t){var e=this;e.currentPage=t,e.sRow=t-1,e.init()},handleEdit:function(t,e){this.form.apiName=e.api,this.form.sql=e.ssql,this.form.desc=e.help,this.form.id=e.Id,this.form.chk=e.chk,this.dialogTitle="编辑",this.visible=!0},getRowStyle:function(){return{height:"50px"}},cancelForm:function(){this.form.apiName="",this.form.sql="",this.form.desc="",this.form.id=0,this.form.chk="",this.visible=!1},submitForm:function(){var t=this,e={Sys_Cmds:{api:t.form.apiName,ssql:t.form.sql,chk:t.form.chk,help:t.form.desc}};"编辑"===t.dialogTitle&&(e.Sys_Cmds.did=t.form.id);var a=JSON.stringify(e);t.updateOraddAPI(a),setTimeout(function(){t.cancelForm()},0)},addAPI:function(){this.dialogTitle="新增",this.visible=!0},updateOraddAPI:function(t){var e=this,a="新增"===e.dialogTitle?ADD_API_LIST:UPDATE_API_LIST;o.a.getDataList.call(e,a,{sp:t})["catch"](function(t){e.$message.error(t)}).then(function(){e.init().then(function(){e.$message({message:"新增"===e.dialogTitle?"添加成功":"修改成功",type:"success"})})})},search:function(){}}}},185:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.addAPI}},[t._v("新增接口")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.$store.state.global.ajax_loading,expression:"$store.state.global.ajax_loading",modifiers:{body:!0}}],staticStyle:{width:"99%"},attrs:{data:t.tableAPIList,"row-class-name":t.$store.state.global.tableRowClassName,"row-style":t.getRowStyle}},[a("el-table-column",{attrs:{prop:"api",label:"接口名",width:"150px"}}),a("el-table-column",{attrs:{prop:"params",label:"参数"}}),a("el-table-column",{attrs:{prop:"help",label:"说明",width:"300px"}}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([["default",function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}]])})],1),a("div",{staticClass:"block flex-x-end"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.eRow,layout:"total, sizes, prev, pager, next, jumper",total:t.totle},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:t.dialogTitle},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("el-form",{attrs:{model:t.row}},[a("el-form-item",{attrs:{label:"接口名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.apiName,callback:function(e){t.form.apiName=e},expression:"form.apiName"}})],1),a("el-form-item",{attrs:{label:"sql","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},"auto-complete":"off"},model:{value:t.form.sql,callback:function(e){t.form.sql=e},expression:"form.sql"}})],1),a("el-form-item",{attrs:{label:"说明","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.desc,callback:function(e){t.form.desc=e},expression:"form.desc"}})],1)],1),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:t.cancelForm}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},63:function(t,e,a){var i,o;i=a(121);var n=a(185);o=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(Object.keys(i).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o=i=i["default"]),"function"==typeof o&&(o=o.options),o.__file="F:\\1\\src\\page\\demo\\api_list.vue",o.render=n.render,o.staticRenderFns=n.staticRenderFns,o.functional&&console.error("[vue-loader] api_list.vue: functional components are not supported and should be defined in plain js files using render functions."),t.exports=i}});